# СРС: Многопоточный менеджер загрузок файлов

**Студент:** Kuanysh Adil  
**Группа:** КИ  

---

## 1. Описание проекта

Консольное Java-приложение, которое загружает файлы по HTTP/HTTPS-ссылкам
в многопоточном режиме. Каждый файл делится на части (chunks), которые
скачиваются параллельно. После завершения загрузки части объединяются в один файл,
а затем выполняется валидация размера и вычисляется SHA-256 хеш.

---

## 2. Используемые технологии

- Java 11+  
- `ExecutorService` (пул потоков)  
- `CountDownLatch` (ожидание завершения всех chunks)  
- HTTP-запросы через `HttpURLConnection`  
- HTTP Range-заголовок для частичной загрузки  
- Класс `MessageDigest` для SHA-256  

---

## 3. Структура проекта

- `Main` — точка входа, парсинг аргументов, запуск DownloadManager  
- `DownloadManager` — управление очередью файлов, ограничение количества
  одновременных загрузок  
- `FileDownloader` — загрузчик одного файла, разбиение на chunks, старт задач  
- `ChunkDownloader` — загрузка конкретного диапазона байт по HTTP Range  
- `FileUtils` — сборка частей в итоговый файл  
- `FileValidator` — проверка размера и вычисление SHA-256  

---

## 4. Требования для запуска

- Установленный **JDK 11+**  
- Подключение к интернету  
- Желательно запускать через IntelliJ IDEA или через консоль  

---

## 5. Инструкция по компиляции и запуску (через консоль)

Перейдите в корень проекта (папка `SRS_DownloadManager`) и выполните:

```bash
# Компиляция
javac -d out src/main/java/com/kuanysh/downloadmanager/*.java

# Запуск с тестовыми файлами (если не указывать аргументы)
java -cp out com.kuanysh.downloadmanager.Main

# Запуск с собственными URL
java -cp out com.kuanysh.downloadmanager.Main https://example.com/file1.zip https://example.com/file2.iso
```

---

## 6. Примеры использования

- Загрузка 2 файлов с ограничением в 2 файла одновременно (см. Main):  
  приложение берет либо тестовые ссылки, либо список URL из аргументов
  командной строки.

---

## 7. Особенности реализации

- Для каждого файла создаются несколько задач-частей (chunks), каждая из которых
  скачивает свой диапазон байт с помощью HTTP Range-заголовка.  
- Использование `CountDownLatch` позволяет дождаться завершения всех chunk'ов
  перед сборкой результирующего файла.  
- В случае ошибки chunk'а создается пустой `.part`-файл, чтобы сборка не падала
  с `FileNotFoundException`, но итоговая валидация размера покажет `FAILED`.  

---


## 8. Вывод
В ходе самостоятельной работы был разработан многопоточный менеджер загрузок файлов на языке Java. В процессе выполнения задания были применены и закреплены знания по работе с многопоточностью и конкурентным программированием.

В работе использовались пулы потоков ExecutorService для параллельной загрузки файлов и их частей, а также синхронизатор CountDownLatch для ожидания завершения всех потоков обработки. Для загрузки частей файлов применялся HTTP Range-заголовок, что позволило разбивать файл на части и загружать их параллельно.

Реализована очередь загрузки файлов с ограничением количества одновременно обрабатываемых задач, что позволяет эффективно управлять ресурсами системы. После завершения загрузки выполнялась сборка частей файла в единый результирующий файл.

Также была реализована валидация загруженных файлов, включающая проверку размера и вычисление SHA-256 хеш-суммы, что позволяет убедиться в корректности загрузки.

В результате выполнения работы получено работоспособное консольное приложение, демонстрирующее практическое применение механизмов многопоточности и синхронизации в Java. 
